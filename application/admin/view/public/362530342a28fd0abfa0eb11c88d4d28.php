<?php if (!defined('THINK_PATH')) exit(); /*a:1:{s:71:"/home/wwwroot/ep11/public_html/application/index/view/goods/detail.html";i:1541399804;}*/ ?>
<!doctype html><html style="font-size:0;"><head>    <meta https-equiv="Content-Type" content="text/html; charset=utf-8"/>    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=0">    <meta name="imagemode" content="force">    <meta name="apple-mobile-web-app-capable" content="yes">    <meta name="apple-mobile-web-app-status-bar-style" content="black">    <meta name="format-detection" content="telephone=no">    <script language=javascript>        if (document.domain == 'ep11.top')            this.location = "https://www.ep11.top" + this.location.pathname + this.location.search;    </script>    <title><?php echo $goods['name']; ?></title>    <link rel="stylesheet" type="text/css" href="__STATIC__/index/css/photoswipe.css"/>    <link rel="stylesheet" type="text/css" href="__STATIC__/index/css/pro_show.css" />    <link rel="stylesheet" type="text/css" href="__STATIC__/index/css/global.css" />    <link rel="stylesheet" type="text/css" href="__STATIC__/index/css/default-skin/default-skin.css"/>    <script>    var _mtac = {};    (function() {        var mta = document.createElement("script");        mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";        mta.setAttribute("name", "MTAH5");        mta.setAttribute("sid", "500646805");        var s = document.getElementsByTagName("script")[0];        s.parentNode.insertBefore(mta, s);    })();</script>    <script type="text/javascript" src="__STATIC__/index/js/jquery.min.js"></script>    <script type="text/javascript" src="__STATIC__/index/js/global.js"></script>    <script type="text/javascript" src="__STATIC__/index/js/swiper-2.1.min.js"></script>    <script type="text/javascript" src="__STATIC__/index/js/pro_show.js"></script>    <script type="text/javascript" src="__STATIC__/index/css/photoswipe.min.js"></script>    <script type="text/javascript" src="__STATIC__/index/css/photoswipe-ui-default.min.js"></script>    <script type="text/javascript" src="__STATIC__/index/js/layer/layer.js"></script>    <script type="text/javascript" src="__STATIC__/index/js/jquery.cookie.js"></script>    <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script></head><body><div class="follow">    <div class="anchor_layer" id="navHeight">        <div class="nav_wrap" id="nav_wrap">            <div class="wrap_layer">                <!-- javascript:window.location.href='<?php echo url('category/categoryList',['categoryId'=>$goods['categoryId']]); ?> -->                <span onclick="javascript :history.back(-1);" class="pro_fh"><i>&#xe66f;</i></span>                <div class="wrap_tab"><a class="tab active" href="#aa">商品</a></div>                <div class="wrap_tab"><a class="tab" href="#bb">详情</a></div>                <span onclick="location='<?php echo url('goods/parameter',['id'=>$goods['id'],'bisId'=>$bisId]); ?>'"                      class="pro_par">参数</span>                <span onclick="location='<?php echo url('goods/comment',['id'=>$goods['id'],'bisId'=>$bisId]); ?>'"                      class="pro_eva">评价</span>            </div>        </div>    </div>    <div class="cont" id="aa">        <div class="pro_img">            <div class="swiper-container">                <div class="swiper-wrapper demo-gallery" id="swiper-wrapper">                    <?php if(is_array($multiImages) || $multiImages instanceof \think\Collection || $multiImages instanceof \think\Paginator): $i = 0; $__LIST__ = $multiImages;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$multiImages): $mod = ($i % 2 );++$i;?>                    <a href="<?php echo $multiImages['src']; ?>" data-size="720x720" data-med="<?php echo $multiImages['src']; ?>"                       data-med-size="720x720" data-author="" class="swiper-slide">                        <img src="<?php echo $multiImages['src']; ?>" alt="">                    </a>                    <?php endforeach; endif; else: echo "" ;endif; ?>                </div>                <div class="pagination"></div>            </div>            <!--<a href="#" class="pro_3d">3D视图</a>-->            <a href="#" class="pro_pk">PK</a>        </div>        <div class="pro_tit">            <h3><?php echo $goods['name']; ?></h3>            <samp class="shop_fen">                <i>&#xe6e0;</i>                分享            </samp>            <div class="clear"></div>            <?php if($bisInfo['type']==3): ?>                <!--工厂显示市场价-->                <span>￥<?php echo $goods['price']; ?></span>                <?php if(!(empty($coupons) || (($coupons instanceof \think\Collection || $coupons instanceof \think\Paginator ) && $coupons->isEmpty()))): if(is_array($coupons) || $coupons instanceof \think\Collection || $coupons instanceof \think\Paginator): $i = 0; $__LIST__ = $coupons;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$cou): $mod = ($i % 2 );++$i;if($bisInfo['type']==$cou['bis_limit']): ?>                        <b>工厂补贴<?php echo $cou['value']; ?>元</b>                    <?php endif; endforeach; endif; else: echo "" ;endif; ?>                    <i class="pro_i"></i>                <?php endif; else: if($goods['after_price'] == '0'): ?>                    <span>￥<?php echo $goods['price']; ?></span>                <?php else: ?>                    <span>￥<?php echo $goods['after_price']; ?></span>                    <em>市场价：¥<?php echo $goods['price']; $goods['price'] = $goods['after_price'];?></em>                <?php endif; endif; ?>        </div>                <div class="pro_type type">            <span>规格选择-<?php echo $attrTypeArray; ?></span>            <i class="pro_i">&#xe636;</i>        </div>        <div class="pro_parameter">            <span>基本参数</span>            <i class="pro_i">&#xe636;</i>        </div>        <div class="eval_tit">            <span></span>            <h3><i>&#xe630;</i>评价</h3>        </div>        <div class="pro_eval">            <div class="pro_eval_tit">                <h3>用户评价（<?php echo $commentNum; ?>）</h3>                <a href="<?php echo url('goods/comment',['id'=>$goods['id'],'bisId'=>$bisId]); ?>">查看更多评价<i>&#xe636;</i></a>            </div>            <?php if(!(empty($comment) || (($comment instanceof \think\Collection || $comment instanceof \think\Paginator ) && $comment->isEmpty()))): ?>            <a href="<?php echo url('goods/comment',['id'=>$goods['id'],'bisId'=>$bisId]); ?>" class="pro_eval_cont">            	<span class="eval_cont_sp">                	<img src="<?php echo $comment['avatar']; ?>">                    <span>                    	<h3><?php echo $comment['username']; ?></h3>                        <b><?php echo $comment['create_time']; ?></b>                    </span>                </span>                <span class="eval_cont_sp2">                   <?php echo $comment['comment']; ?>                </span>            </a>            <?php endif; ?>        </div>        <!--不显示店铺信息-->        <!--<div class="pro_sd">-->            <!--<div class="pro_sd_tit">-->                <!--<span>-->                    <!--<?php if(empty($bisInfo['avatar']) || (($bisInfo['avatar'] instanceof \think\Collection || $bisInfo['avatar'] instanceof \think\Paginator ) && $bisInfo['avatar']->isEmpty())): ?>-->                        <!--<img src="__STATIC__/index/images/logo1.jpg">-->                    <!--<?php else: ?>-->                        <!--<img src="<?php echo $bisInfo['avatar']; ?>">-->                    <!--<?php endif; ?>-->                <!--</span>-->                <!--<samp>-->                    <!--<h3><?php echo $bisInfo['name']; ?></h3>-->                    <!--<em>商品数：<?php echo $goodsNum; ?></em>-->                <!--</samp>-->            <!--</div>-->            <!--<a href="<?php echo url('bis/allgoods',['bisId'=>$bisId]); ?>" class="pro_sd_bnt"><i>&#xe6bb;</i><em>全部商品</em></a>-->            <!--<a href="<?php echo url('bis/index',['bisId'=>$bisId]); ?>" class="pro_sd_bnt2"><i>&#xe67a;</i><em>进店逛逛</em></a>-->        <!--</div>-->    </div>    <div class="cont" id="bb">        <div class="del_tit" id="detail">            <span></span>            <h3><i>&#xe643;</i>详情</h3>        </div>        <div class="del_cont"><?php echo $content['value']; ?></div>    </div>    <div class="pro_cust">        <h3>易网手机商城售后服务说明</h3>        <span>            <p>               1.凭易网互联购机单，手机及平板电脑享受法定三包售后服务：“七天包退、十五天包换、一年非人为损坏保修”，附件产品按其产品规定保修细则执行，保修期以购机单所注日期为准。            </p>            <p>                2.如因质量问题或故障，确保在无人为损坏、完好的前提下，可七天包退、十五天包换。与您亲临实体店选购的商品享受相同的质量保证，请您放心购买！            </p>            <p>                3.如有任何疑问，请咨询客服电话：159-0754-7777。            </p>        </span>    </div>    <div class="pro_foot">        <div class="pro_ft_left">            <a href="#" class="pro_kf">                <i>&#xe60b;</i>                客服            </a>            <a href="javascript:;" class="pro_sc<?php if($ifExist == '1'): ?> sc<?php else: endif; ?>">                <i class="l">&#xe678;</i>                <i class="r">&#xe677;</i>                收藏            </a>            <a href="<?php echo url('Trolley/index'); ?>" class="pro_gwc">                <i>&#xe615;</i>                购物车                <?php if(empty($trollyNum) || (($trollyNum instanceof \think\Collection || $trollyNum instanceof \think\Paginator ) && $trollyNum->isEmpty())): else: ?><span><?php echo $trollyNum; ?></span><?php endif; ?>            </a>        </div>        <a href="javascript:;" class="ljgm buy">立即购买</a>        <a href="javascript:;" class="jrgwc type">加入购物车</a>    </div></div><!--弹出视频--><!--产品弹出图片--><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">    <div class="pswp__bg"></div>    <div class="pswp__scroll-wrap">        <div class="pswp__container">            <div class="pswp__item"></div>            <div class="pswp__item"></div>            <div class="pswp__item"></div>        </div>        <div class="pswp__ui pswp__ui--hidden">            <div class="pswp__top-bar">                <div class="pswp__counter"></div>                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>                <button class="pswp__button pswp__button--close" title="Close (Esc)">&#xe66f;</button>                <button class="pswp__button pswp__button--share" title="Share">&#xe633;</button>                <div class="pswp__preloader">                    <div class="pswp__preloader__icn">                        <div class="pswp__preloader__cut">                            <div class="pswp__preloader__donut"></div>                        </div>                    </div>                </div>            </div>            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">                <div class="pswp__share-tooltip"></div>            </div>            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">            </button>            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">            </button>            <div class="pswp__caption">                <div class="pswp__caption__center"></div>            </div>        </div>    </div></div><!--优惠券--><div class="coupon">    <div class="coupon-container">        <div class="coupon_tit"><?php if($bisType == '3'): ?>工厂补贴券<?php else: ?>优惠券<?php endif; ?></div>        <div class="coupon_cont">            <?php if(is_array($coupons) || $coupons instanceof \think\Collection || $coupons instanceof \think\Paginator): $i = 0; $__LIST__ = $coupons;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$coupon): $mod = ($i % 2 );++$i;if($bisInfo['type']==$cou['bis_limit']): if(empty($coupon['have_got']) || (($coupon['have_got'] instanceof \think\Collection || $coupon['have_got'] instanceof \think\Paginator ) && $coupon['have_got']->isEmpty())): ?>                <div class="coupon_quan">                    <div class="cou_left">                        <span><i>&#xe638;</i><b><?php echo $coupon['value']; ?></b></span>                        <samp>                            <?php echo $coupon['description']; ?><br>                            有效期：<?php echo date('Y.m.d',$coupon['start_time']);?>-<?php echo date('Y.m.d',$coupon['end_time']);?>                        </samp>                    </div>                    <a href="javascript:;" class="cou_right" onclick="return getCoupons(this)" id = "<?php echo $coupon['id']; ?>">立即领取</a>                </div>                <?php else: ?>                <div class="coupon_quan cou_alr">                    <div class="cou_left">                        <span><i>&#xe638;</i><b><?php echo $coupon['value']; ?></b></span>                        <samp>                            <?php echo $coupon['description']; ?><br>                            有效期：<?php echo date('Y.m.d',$coupon['start_time']);?>-<?php echo date('Y.m.d',$coupon['end_time']);?>                        </samp>                    </div>                    <a href="javascript:;" class="cou_right">已领取</a>                </div>                <?php endif; endif; endforeach; endif; else: echo "" ;endif; ?>        </div>        <a href="javascript:;" class="coupon-close">关闭</a>    </div></div><!--保障说明--><!--选择类型--><div class="type_div">    <div class="type-container">        <div class="type_img">            <input type="hidden" id="goodsId" value="<?php echo $goods['id']; ?>"/>            <input type="hidden" id="bisId" value="<?php echo $bisId; ?>"/>            <img id="goodsImg" src="<?php echo $goods['image']; ?>">            <a href="javascript:;" class="type-close"><i>&#xe627;</i></a>            <span>            	<b value="<?php echo $goods['price']; ?>" id="price">¥ <?php echo $goods['price']; ?></b>                <samp id="name"><?php echo $goods['name']; ?></samp>                <em>库存：<i><?php echo $goods['suk']; ?></i></em>            </span>        </div>        <div class="type_cont">            <?php if(is_array($attrType) || $attrType instanceof \think\Collection || $attrType instanceof \think\Paginator): $k = 0; $__LIST__ = $attrType;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$type): $mod = ($k % 2 );++$k;?>            <div class="type_list">                <h3><?php echo $type['name']; ?></h3>                <ul>                    <?php if(is_array($goodsAttr) || $goodsAttr instanceof \think\Collection || $goodsAttr instanceof \think\Paginator): $i = 0; $__LIST__ = $goodsAttr;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$attr): $mod = ($i % 2 );++$i;if($attr['name'] == $type['name']): ?>                    <li good_value="<?php echo $attr['value']; ?>" id="<?php echo $attr['id']; ?>" <?php if($currentAttr[$k-1]['value'] == $attr['value']): ?>class="on"<?php endif; ?>><?php echo $attr['value']; ?></li>                    <?php endif; endforeach; endif; else: echo "" ;endif; ?>                </ul>            </div>            <?php endforeach; endif; else: echo "" ;endif; ?>            <div class="type_list">                <samp>购买数量</samp>                <div class="type_num">                    <input type="text" class="spinnerExample"/>                </div>            </div>        </div>        <div class="type_an">            <a>确定</a>        </div>    </div></div><!--基本参数--><div class="parameter">    <div class="parameter-container">        <div class="parameter_tit">基本参数</div>        <ul class="parameter_cont">            <?php if(is_array($goodsParams) || $goodsParams instanceof \think\Collection || $goodsParams instanceof \think\Paginator): $i = 0; $__LIST__ = $goodsParams;if( count($__LIST__)==0 ) : echo "" ;else: foreach($__LIST__ as $key=>$params): $mod = ($i % 2 );++$i;if($params['type'] == '0'): if($params['name'] != 'content'): ?>            <li>                <span><?php echo $params['name']; ?></span>                <samp><?php echo $params['value']; ?></samp>            </li>            <?php endif; endif; endforeach; endif; else: echo "" ;endif; ?>        </ul>        <a href="javascript:;" class="parameter-close">关闭</a>    </div></div><!--PK--><div class="pk">    <div class="pk_cont">        <div class="pk_tit">商品对比栏<span>(最多4项)</span></div>        <div class="pk_con">            <ul id="pk_trast_product">                <li id="<?php echo $goods['id']; ?>">                    <img src="<?php echo $goods['image']; ?>">                    <span>                    	<em style="white-space:nowrap;"><?php echo $goods['name']; ?></em>                        <samp>￥<?php echo $goods['price']; ?></samp>                    </span>                    <a href="<?php echo url('goods/delContrastCookie',['id'=>$goods['id']]); ?>" id='remove_li'>删除</a>                </li>            </ul>            <div class="pk_add"><i>&#xe653;</i>添加商品</div>        </div>        <div class="pk_bottom">            <a href="javascript:;" class="pk_colse">隐藏</a>            <a href="#" class="pk_trast">开始对比</a>        </div>    </div></div><div class="pk_jia">    <div class="pk_cont" style="height:7.7rem;">        <div class="pk_tit">请选择商品</span></div>        <div class="pk_con2">            <ul class="faq" id="first_category">            </ul>        </div>        <div class="pk_bottom">            <a href="javascript:;" class="pk_jia_colse">关闭</a>        </div>    </div></div><!--下架--><div class="shelf">    <div class="shelf_div">        <h3>确认下架该商品？</h3>        <a onclick="downShelf()">下架</a>        <a href="javascript:;" class="shelf_close">取消</a>    </div></div><!--客服--><div class="kefu">    <div class="kefu_div">        <div class="kefu_tel">        	<span>            	<i>&#xe6f1;</i>                电话客服            </span>            <samp>                <a href="tel:15907547777">159-0754-7777</a>                服务时间：9:00~21:00            </samp>        </div>        <div class="kefu_ewm">        	<span>            	<i>&#xe6fb;</i>                微信客服            </span>            <samp>                <img src="__STATIC__/index/images/63.jpg">            </samp>        </div>        <a href="javascript:;" class="kefu_close"><i>&#xe627;</i></a>    </div></div><div class="load_sh "><!--加样式“load_on”才显示-->    <img src="__STATIC__/index/images/fading.gif">    正在提交...</div><!-- 分享 --><div class="pro_fx">    <div class="pro_fx_cont">        <a href="javascript:;" class="pro_fx_close"><i>&#xe627;</i></a>        <span><img src=""></span>        <div class="load_sh "><!--加样式“load_on”才显示-->            <img src="__STATIC__/index/images/fading.gif">            正在加载...        </div>    </div></div><script type="text/javascript" src="__STATIC__/index/js/jquery.navScroll.js"></script><script type="text/javascript">    suk = "<?php echo $goods['suk']; ?>";    //内容信息导航锚点    $('.nav_wrap').navScroll({        mobileDropdown: true,        mobileBreakpoint: 768,        scrollSpy: true    });    //视频弹出    var myVideo = document.getElementById("pro_vid");    $(".video").click(function () {        $(".pro_video").toggleClass("pro_video_on");        $(".follow").toggleClass("follow-on");        return false;    });    $(".close_video").click(function () {        $(".pro_video").removeClass("pro_video_on");        $(".follow").removeClass("follow-on");        myVideo.pause();    });    //立刻支付    //    //领券成功的弹窗    function getCoupons(obj){        var url = "<?php echo url('api/Coupons/getCouponsFromCenter'); ?>",                couponId = $(obj).attr('id')        data = {'id': couponId,'bisId':"<?php echo $bisId; ?>"};        $.post(url, data, function (result) {            if (result.code == 0) {                layer.msg(result.msg);                setTimeout(function () {                    window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                }, 1000)            }else if(result.code == 300009){                binding = confirm('请先绑定手机号码');                if(binding == true){                   window.location.href = "<?php echo url('jobber/login/bingPhone'); ?>";                 }            } else if (result.code == 30011 || result.code == 300013) {                layer.msg(result.msg);                $("#" + couponId).html("已领取");                $("#" + couponId).attr("disabled", "true");                $("#" + couponId).parent().addClass("cou_alr");            } else {                layer.msg(result.msg);            }        });    }    //收藏    $(".pro_sc").click(function () {        $(".pro_sc").toggleClass("sc");        if ($(".pro_sc").hasClass('sc')) {            var data = {'productId': "<?php echo $goods['id']; ?>", 'bisId': "<?php echo $bisId; ?>"},                    url = "<?php echo url('api/Collection/add'); ?>";            $.post(url, data, function (result) {                if (result.code == 0) {                    layer.msg(result.msg);                    setTimeout(function () {                        window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                    }, 1000)                } else if (result.code == 40001 || result.code == 40002) {                    layer.msg(result.msg);                    $(this).addClass("sc");                }            });        } else {            var data = {'productId': "<?php echo $goods['id']; ?>", 'status': 0, 'bisId': "<?php echo $bisId; ?>"},                    url = "<?php echo url('api/Collection/add'); ?>";            $.post(url, data, function (result) {                if (result.code == 0) {                    layer.msg(result.msg);                    setTimeout(function () {                        window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                    }, 1000)                } else if (result.code == 40003) {                    layer.msg(result.msg);                    $(this).removeClass("sc");                } else {                    layer.msg(result.msg);                }            });        }    });    //选择类型    //    final_price = '';    var liNum = 0;    $(".type_list ul li").click(function (e) {        var currenIndex = $(e.target).parent().parent().index();        $('.type_list').each(function (index) {            if(index != currenIndex){                $(".type_list:eq("+index+")").children("ul").find("li").removeClass("i");            }        });        //获取所有被选中的属性值        var modelId = "<?php echo $goods['modelId']; ?>";        var goodsValue = [];//        var ids = [];        /*console.log(e.srcElement.id);         return false;*/        if($(this).hasClass("i")){            $(this).removeClass("on");        }else{            $(this).addClass("on").siblings().removeClass("on");        }        //获取属性种类数量        $('.type_list ul').each(function (index) {            liNum = index + 1;        });        //选中的属性id数组        $('.type_list ul .on').each(function (index, item) {            goodsValue.push(($(item).attr('good_value')));//            ids.push(($(item).attr('id')));        });        //异步post查询产品数据        $.ajax({            url: "<?php echo url('index/goods/getGoodsInfoByAttrIds'); ?>", //服务器路径            data: {"goodsValue": goodsValue, "liNum": liNum, "modelId":modelId},//            data: {"ids":ids,"liNum":liNum},            type: "post",            dataType: "json",            async: true,            success: function (data) { //成功返回数据执行                if (data.result == 'success') {                    //异步更新价格和名字                    //当前加减框的数量                    var currentNum = $(".spinnerExample");                    $('.type_img span b').html('¥' + data.price);                    $('.type_img span b').attr('value', data.price);                    $('.type_img span em i').html( data.suk);                    suk = data.suk;                    //如果当前加减框的数量大于产品库存,则加减框中的数量修改为产品库存                    if(currentNum.val() > suk)                        currentNum.attr('value',suk);                    $("#name").text(data.name);                    $("#bisId").attr('value', data.bisId);                    $("#goodsId").attr('value', data.productId);                    $("#goodsImg").attr('src', data.goodsImg);                } else if(data.msg=="产品不存在"){                    $('.type_img span b').html('¥' + "<?php echo $goods['price']; ?>");                    var currentId = e.srcElement.id;                    $("#"+currentId).removeClass("on");                    $("#"+currentId).addClass("i");                    $("#jobberId").attr('value', '');                    $("#goodsId").attr('value', '');                }else if(data.msg=="库存不足"){                    $('.type_img span b').html('¥' + "<?php echo $goods['price']; ?>");                    var currentId = e.srcElement.parentNode.id;                    $("#"+currentId).removeClass("on");                    $("#"+currentId).addClass("i");                    $("#jobberId").attr('value', '');                    $("#goodsId").attr('value', '');                }            }        });    });    //加入购物车    $(".jrgwc").click(function () {        $(".type_an a").attr("onclick", "jrgwc();");        if (goodsAttr == '') {            $(".type_div").addClass("is-visible");            return false;        }        $(".load_sh").show();        jrgwc();    });    //自己购买    var goodsAttr = [];    $(".zjgm").click(function () {        $(".type_an a").attr("onclick", "goodsBuy();");        if (goodsAttr == '') {            $(".type_div").addClass("is-visible");            layer.msg('请选择参数');            return false;        }        $(".load_sh").show();        goodsBuy();    });    //立刻购买    var goodsAttr = [];    $(".buy").click(function () {        $(".type_an a").attr("onclick", "goodsBuy();");        if (goodsAttr == '') {            $(".type_div").addClass("is-visible");            layer.msg('请选择参数');            return false;        }        $(".load_sh").show();        goodsBuy();    });    function goodsBuy() {        var goodsNum = $(".spinner input").attr('value'),                goodsId = $("#goodsId").attr('value'),                goodsName = $("#name").text(),                bisId = $("#bisId").attr('value'),                goodsPrice = $('#price').attr('value'),//              goodsName="<?php echo $goods['name']; ?>",                goodsAttr = [];        $(".on").each(function (i) {            goodsAttr.push($(this).attr("id"));        });        if (goodsAttr == '') {            $(".type_div").addClass("is-visible");            layer.msg('请选择参数');            return false;        }        //选全参数        var attrNum  = "<?php echo count($attrType);?>";        if($(goodsAttr).length != attrNum){            $(".type_div").addClass("is-visible");            layer.msg('请选全参数');            return false;        }        if (goodsId == '') {            $(".type_div").addClass("is-visible");            layer.msg('请选择参数');            return false;        }        $(".load_sh").show();        var url = "<?php echo url('api/order/createOrder'); ?>",                data = {                    'goodsId': goodsId,                    'goodsAttr': goodsAttr,                    'num': goodsNum,                    'final_price': goodsPrice,                    'goodsName': goodsName,                    'bisId': "<?php echo $bisId; ?>"                };        $.post(url, data, function (result) {            // 逻辑            if (result.code == 0) {                $(".load_sh").hide();                layer.msg(result.msg);                setTimeout(function () {                    window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                }, 1000)            } else if (result.code == 11009) {                $(".type_div").removeClass("is-visible");                $(".load_sh").hide();                binding = confirm('请先绑定手机号码');                if(binding == true)                   window.location.href = "<?php echo url('jobber/login/bingPhone'); ?>";             } else if (result.code == 11001) {                $(".load_sh").hide();                window.location.href = result.url;                $(".type_div").removeClass("is-visible");            } else {                $(".load_sh").hide();                layer.msg(result.msg);            }        }, "json");    }    function jrgwc() {        var goodsId = $("#goodsId").attr('value'),                goodsNum = $(".spinner input").attr('value'),                goodsAttr = [],                bisId = $("#bisId").attr('value'),                goodsPrice = $('#price').attr('value'),                trollyNum1 = $(".pro_gwc span").text();        trollyNum1 = trollyNum1 == '' ? 0 : trollyNum1;        $(".on").each(function (i) {            goodsAttr.push($(this).attr("id"));        });        //选全参数        var attrNum  = "<?php echo count($attrType);?>";        if($(goodsAttr).length != attrNum){            $(".type_div").addClass("is-visible");            layer.msg('请选全参数');            return false;        }        console.log(goodsId);        if (goodsId == '' || goodsAttr == '') {            $(".type_div").addClass("is-visible");            layer.msg('select attr pls');            return false;        }        if (goodsPrice == '') {            return false;        }        $(".load_sh").show();        var url = "<?php echo url('api/Trolley/jrgwc'); ?>",                data = {                    'goodsId': goodsId,                    'goodsAttr': goodsAttr,                    'num': goodsNum,                    'final_price': goodsPrice * goodsNum,                    'bisId': "<?php echo $bisId; ?>"                };        $.post(url, data, function (result) {            // 逻辑            $(".load_sh").hide();            if (result.code == 0) {                layer.msg(result.msg);                setTimeout(function () {                    window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                }, 1000)            } else if (result.code == 20001) {                layer.msg(result.msg);                //购物车数量                if( $(".pro_gwc span").length>0 )                    $(".pro_gwc span").html(parseInt(trollyNum1)+parseInt(1));                else{                    var trolley_num = parseInt(trollyNum1)+parseInt(1),                            add_trolleyNum = "<span>"+trolley_num+"</span>";                    $(".pro_gwc").append(add_trolleyNum);                }                $(".type_div").removeClass("is-visible");            } else {                $(".load_sh").hide();                layer.msg(result.msg);            }        }, "json");    }    //选择的参数加入页面    $(".type_an a").click(function(){        var result='';        $(".type_list ul .on").each(function(){            result=result+ $(this).text()+'/';        });        $(".pro_type span").text('您已选择了：'+result);        $('.type_div').removeClass('is-visible');        $('.follow').removeClass('follow-on');    });    //删除上架商品    //    $(".remove").on("click",function(){        var id = shelfId,                url = "<?php echo url('api/bis/delete'); ?>",                postData = {'id':id};        $.post(url,postData,function(result){            if(result.code == 0){                layer.msg(result.msg);                setTimeout(function() {                    window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                },1000)            }else if(result.code == 12024){                layer.msg(result.msg);                setTimeout(function() {                    window.location.href="<?php echo url('index/index'); ?>"                },1000)            }else{                layer.msg(result.msg);            }        });    });    $(".top_set_confirm").on("click",function(){        var id = shelfId,                url = "<?php echo url('api/bis/topSet'); ?>",                postData = {'id':id};        $.ajax({            type: "POST",            url: url,            data: postData,            success: function(data){                if(data.code = 0){                    layer.msg(data.msg);                    setTimeout(function() {                        window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                    },1000)                }else{                    layer.msg(data.msg);                    setTimeout(function() {                        window.location.reload()                    },1000)                }            }        });    });    $(".top_set_cancle_confirm").on("click",function(){        var id = shelfId,                url = "<?php echo url('api/bis/topSet'); ?>",                postData = {'id':id,'type':'1'};        $.ajax({            type: "POST",            url: url,            data: postData,            success: function(data){                if(data.code = 0){                    layer.msg(data.msg);                    setTimeout(function() {                        window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx6d86475612974d04&redirect_uri=https://www.ep11.top/api/login/user_oauth2&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect";                    },1000)                }else{                    layer.msg(data.msg);                    setTimeout(function() {                        window.location.reload()                    },1000)                }            }        });    });    //编辑弹窗    $(".com_mj").click(function () {        $(".edit_tang").toggleClass("edit_tang_on");        return false;    });    //删除弹窗    $(".comm_del").click(function () {        shelfId = $(this).parent().attr("shelfId");        $(".del_confirm").toggleClass("del_on");        $(".edit_tang").removeClass("edit_tang_on");    });    $(".del_close").click(function () {        $(".del").removeClass("del_on");    });    //置顶    shelfId = '';    $(".comm_top").click(function () {        shelfId = $(this).parent().attr("shelfId");        $(".top_set").toggleClass("del_on");        $(".edit_tang").removeClass("edit_tang_on");    });    $(".del_close").click(function () {        $(".top_set").removeClass("del_on");    });    //取消置顶    $(".comm_top_cancle").click(function () {        shelfId = $(this).parent().attr("shelfId");        $(".top_set_cancle").toggleClass("del_on");        $(".edit_tang").removeClass("edit_tang_on");    });    $(".del_close").click(function () {        $(".top_set").removeClass("del_on");    });    (function () {        var initPhotoSwipeFromDOM = function (gallerySelector) {            var parseThumbnailElements = function (el) {                var thumbElements = el.childNodes,                        numNodes = thumbElements.length,                        items = [],                        el,                        childElements,                        thumbnailEl,                        size,                        item;                for (var i = 0; i < numNodes; i++) {                    el = thumbElements[i];                    // include only element nodes                    if (el.nodeType !== 1) {                        continue;                    }                    childElements = el.children;                    size = el.getAttribute('data-size').split('x');                    // create slide object                    item = {                        src: el.getAttribute('href'),                        w: parseInt(size[0], 10),                        h: parseInt(size[1], 10),                        author: el.getAttribute('data-author')                    };                    item.el = el; // save link to element for getThumbBoundsFn                    if (childElements.length > 0) {                        item.msrc = childElements[0].getAttribute('src'); // thumbnail url                        if (childElements.length > 1) {                            item.title = childElements[1].innerHTML; // caption (contents of figure)                        }                    }                    var mediumSrc = el.getAttribute('data-med');                    if (mediumSrc) {                        size = el.getAttribute('data-med-size').split('x');                        // "medium-sized" image                        item.m = {                            src: mediumSrc,                            w: parseInt(size[0], 10),                            h: parseInt(size[1], 10)                        };                    }                    // original image                    item.o = {                        src: item.src,                        w: item.w,                        h: item.h                    };                    items.push(item);                }                return items;            };            // find nearest parent element            var closest = function closest(el, fn) {                return el && ( fn(el) ? el : closest(el.parentNode, fn) );            };            var onThumbnailsClick = function (e) {                e = e || window.event;                e.preventDefault ? e.preventDefault() : e.returnValue = false;                var eTarget = e.target || e.srcElement;                var clickedListItem = closest(eTarget, function (el) {                    return el.tagName === 'A';                });                if (!clickedListItem) {                    return;                }                var clickedGallery = clickedListItem.parentNode;                var childNodes = clickedListItem.parentNode.childNodes,                        numChildNodes = childNodes.length,                        nodeIndex = 0,                        index;                for (var i = 0; i < numChildNodes; i++) {                    if (childNodes[i].nodeType !== 1) {                        continue;                    }                    if (childNodes[i] === clickedListItem) {                        index = nodeIndex;                        break;                    }                    nodeIndex++;                }                if (index >= 0) {                    openPhotoSwipe(index, clickedGallery);                }                return false;            };            var photoswipeParseHash = function () {                var hash = window.location.hash.substring(1),                        params = {};                if (hash.length < 5) { // pid=1                    return params;                }                var vars = hash.split('&');                for (var i = 0; i < vars.length; i++) {                    if (!vars[i]) {                        continue;                    }                    var pair = vars[i].split('=');                    if (pair.length < 2) {                        continue;                    }                    params[pair[0]] = pair[1];                }                if (params.gid) {                    params.gid = parseInt(params.gid, 10);                }                return params;            };            var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {                var pswpElement = document.querySelectorAll('.pswp')[0],                        gallery,                        options,                        items;                items = parseThumbnailElements(galleryElement);                // define options (if needed)                options = {                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),                    getThumbBoundsFn: function (index) {                        // See Options->getThumbBoundsFn section of docs for more info                        var thumbnail = items[index].el.children[0],                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,                                rect = thumbnail.getBoundingClientRect();                        return {x: rect.left, y: rect.top + pageYScroll, w: rect.width};                    },                    //addCaptionHTMLFn: function(item, captionEl, isFake) {//						if(!item.title) {//							captionEl.children[0].innerText = '';//							return false;//						}//						captionEl.children[0].innerHTML = item.title +  '<br/><small>Photo: ' + item.author + '</small>';//						return true;//			        }                };                if (fromURL) {                    if (options.galleryPIDs) {                        // parse real index when custom PIDs are used                        // https://photoswipe.com/documentation/faq.html#custom-pid-in-url                        for (var j = 0; j < items.length; j++) {                            if (items[j].pid == index) {                                options.index = j;                                break;                            }                        }                    } else {                        options.index = parseInt(index, 10) - 1;                    }                } else {                    options.index = parseInt(index, 10);                }                // exit if index not found                if (isNaN(options.index)) {                    return;                }                var radios = document.getElementsByName('gallery-style');                for (var i = 0, length = radios.length; i < length; i++) {                    if (radios[i].checked) {                        if (radios[i].id == 'radio-all-controls') {                        } else if (radios[i].id == 'radio-minimal-black') {                            options.mainClass = 'pswp--minimal--dark';                            options.barsSize = {top: 0, bottom: 0};                            options.captionEl = false;                            options.fullscreenEl = false;                            options.shareEl = false;                            options.bgOpacity = 0.85;                            options.tapToClose = true;                            options.tapToToggleControls = false;                        }                        break;                    }                }                if (disableAnimation) {                    options.showAnimationDuration = 0;                }                // Pass data to PhotoSwipe and initialize it                gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);                // see: https://photoswipe.com/documentation/responsive-images.html                var realViewportWidth,                        useLargeImages = false,                        firstResize = true,                        imageSrcWillChange;                gallery.listen('beforeResize', function () {                    var dpiRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;                    dpiRatio = Math.min(dpiRatio, 2.5);                    realViewportWidth = gallery.viewportSize.x * dpiRatio;                    if (realViewportWidth >= 1200 || (!gallery.likelyTouchDevice && realViewportWidth > 800) || screen.width > 1200) {                        if (!useLargeImages) {                            useLargeImages = true;                            imageSrcWillChange = true;                        }                    } else {                        if (useLargeImages) {                            useLargeImages = false;                            imageSrcWillChange = true;                        }                    }                    if (imageSrcWillChange && !firstResize) {                        gallery.invalidateCurrItems();                    }                    if (firstResize) {                        firstResize = false;                    }                    imageSrcWillChange = false;                });                gallery.listen('gettingData', function (index, item) {                    if (useLargeImages) {                        item.src = item.o.src;                        item.w = item.o.w;                        item.h = item.o.h;                    } else {                        item.src = item.m.src;                        item.w = item.m.w;                        item.h = item.m.h;                    }                });                gallery.init();            };            // select all gallery elements            var galleryElements = document.querySelectorAll(gallerySelector);            for (var i = 0, l = galleryElements.length; i < l; i++) {                galleryElements[i].setAttribute('data-pswp-uid', i + 1);                galleryElements[i].onclick = onThumbnailsClick;            }            // Parse URL and open gallery if it contains #&pid=3&gid=1            var hashData = photoswipeParseHash();            if (hashData.pid && hashData.gid) {                openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);            }        };        initPhotoSwipeFromDOM('.demo-gallery');    })();    //加减    (function ($) {        $.fn.spinner = function (opts) {            return this.each(function () {                var defaults = {value:1, min:1}                var options = $.extend(defaults, opts)                var keyCodes = {up:38, down:40}                var container = $('<div></div>')                container.addClass('spinner')                var textField = $(this).addClass('value').attr('maxlength', '2').val(options.value)                        .bind('keyup paste change', function (e) {                            var field = $(this)                            if (e.keyCode == keyCodes.up) changeValue(1)                            else if (e.keyCode == keyCodes.down) changeValue(-1)                            else if (getValue(field) != container.data('lastValidValue')) validateAndTrigger(field)                        })                textField.wrap(container)                var increaseButton = $('<button class="increase"></button>').click(function () {                    if(getValue() < suk){                        changeValue(1)                    }else{layer.msg('数量超出范围');}                })                var decreaseButton = $('<button class="decrease"></button>').click(function () { changeValue(-1) })                validate(textField)                container.data('lastValidValue', options.value)                textField.before(decreaseButton)                textField.after(increaseButton)                function changeValue(delta) {                    textField.val(getValue() + delta)                    validateAndTrigger(textField)                }                function validateAndTrigger(field) {                    clearTimeout(container.data('timeout'))                    var value = validate(field)                    if (!isInvalid(value)) {                        textField.trigger('update', [field, value])                    }                }                function validate(field) {                    var value = getValue()                    if (value <= options.min) decreaseButton.attr('disabled', 'disabled')                    else decreaseButton.removeAttr('disabled')                    field.toggleClass('invalid', isInvalid(value)).toggleClass('passive', value === 0)                    if (isInvalid(value)) {                        var timeout = setTimeout(function () {                            textField.val(container.data('lastValidValue'))                            validate(field)                        }, 500)                        container.data('timeout', timeout)                    } else {                        container.data('lastValidValue', value)                    }                    return value                }                function isInvalid(value) { return isNaN(+value) || value < options.min; }                function getValue(field) {                    field = field || textField;                    return parseInt(field.val() || 0, 10)                }            })        }    })(jQuery)    $('.spinnerExample').spinner({});    //联系客服    $(".pro_kf").click(function () {        $(".kefu").toggleClass("kefu_on");    });    $(".kefu_close").click(function () {        $(".kefu").removeClass("kefu_on");    });    //分享</script><script>    //分享    jQuery(document).ready(function($){        //open popup        $('.shop_fen').on('click', function(event){            event.preventDefault();            $('.pro_fx').addClass('is-visible3');            if($('.pro_fx_cont img').attr('src') ==""){                    $('.pro_fx .load_sh').addClass("load_on");                    $.ajax({                        url: "<?php echo url('api/ImgShare/index'); ?>",                        type: 'post',                        dataType: 'json',                        data:{'productId':"<?php echo $goods['id']; ?>",'bisId':"<?php echo $bisId; ?>",'image':"<?php echo $goods['image']; ?>",'name':"<?php echo $goods['name']; ?>",'price':"<?php echo $goods['price']; ?>"},                        timeout: 1000,                        success: function (data) {                            if(data.code == 10001){                                $('.pro_fx .load_sh').removeClass("load_on");                                $('.pro_fx_cont img').attr('src',data.path);                            }                      },                        fail: function (err, status) {                            console.log(err)                        }                    })                }            });        //close popup    $('.pro_fx').on('click', function(event){        if( $(event.target).is('.pro_fx_close') || $(event.target).is('.pro_fx') ) {            event.preventDefault();            $(this).removeClass('is-visible3');        }    });    //close popup when clicking the esc keyboard button    $(document).keyup(function(event){        if(event.which=='27'){            $('.pro_fx').removeClass('is-visible3');        }    });});    //pk弹出    //pk    $(".pro_pk").click(function() {        $(".pk").toggleClass("pk_on");        return false;    });    $(".pk_colse").click(function() {        $(".pk").removeClass("pk_on");    });    $(".pk_jia_colse").click(function() {        $(".pk_jia").removeClass("pk_on");    });    //获取分类    $(".pk_add").click(function() {        var id="<?php echo $goods['category_id']; ?>";        var url="<?php echo url('category/getCategory'); ?>";        var firstCategoryListHtml = String();        var i = 0;        $("#pk_trast_product>li").each(function(){            i++;        });        if(i > 3){            layer.msg("最多选择4项");return;        }        $(".pk_jia").toggleClass("pk_on");        $(".pk").removeClass("pk_on");        $.get(url,{'id':id},function(ret){            if(ret.result == 'success'){                console.log(ret.msg);                $.each(ret.data,function(key,val){                    firstCategoryListHtml += "<li class='q' id='"+val.id+"'>"+val.name+"<i class=''>&#xe63a;</i></li>";                });                $("#first_category").html(firstCategoryListHtml);            }else{                layer.msg(ret.msg);            }        });        return false;    });    //从分类获取商品    $("body").on("click",".faq>li",function(){        var url="<?php echo url('goods/getProductByCategory'); ?>";        var id=$(this).attr('id');        var secondCategoryListHtml = String();        //判断是否输出数据        var isHas = $("#" + id).next().attr('class');        if(isHas == 'q') {            $.get(url, {'id': id,'bisId':"<?php echo $bisId; ?>"}, function (ret) {                if (ret.result == 'success') {                    console.log(ret.msg);                    secondCategoryListHtml = "<li class='a' style='display:block;'>";                    $.each(ret.data, function (key, val) {                        secondCategoryListHtml += "<a href='#' id='"+val.productId+"'>";                        secondCategoryListHtml += "<img src='" + val.image + "'>";                        secondCategoryListHtml += "<samp>";                        secondCategoryListHtml += "<em>" + val.name + "</em>";                        secondCategoryListHtml += "<b>￥" + val.price + "</b>";                        secondCategoryListHtml += "</samp>";                        secondCategoryListHtml += "</a>";                    });                    secondCategoryListHtml += "</li>";                    $("#" + id).after(secondCategoryListHtml);                } else {                    layer.msg('没有商品哦，请选择其他商品吧');                }            });        }else if(isHas == 'a'){            $(this).next().slideToggle(speed)                    //selects all other answers and slides up any open answer                    .siblings('li.a').slideUp();            var img = $(this).children('i');            //Remove Rotate class from all images except the active            $('i').not(img).removeClass('rotate');            //toggle rotate class            img.toggleClass('rotate');        }else{            $.get(url, {'id': id}, function (ret) {                if (ret.result == 'success') {                    console.log(ret.msg);                    secondCategoryListHtml = "<li class='a' style='display:block;'>";                    $.each(ret.data, function (key, val) {                        secondCategoryListHtml += "<a href='#' id='"+val.productId+"'>";                        secondCategoryListHtml += "<img src='" + val.image + "'>";                        secondCategoryListHtml += "<samp>";                        secondCategoryListHtml += "<em>" + val.name + "</em>";                        secondCategoryListHtml += "<b>￥" + val.price + "</b>";                        secondCategoryListHtml += "</samp>";                        secondCategoryListHtml += "</a>";                    });                    secondCategoryListHtml += "</li>";                    $("#" + id).after(secondCategoryListHtml);                } else {                    layer.msg('没有商品哦，请选择其他商品吧');                }            });        }        return false;    });    //点击事件，.a>a标签点击失效    $('body').on('click','.a>a',function(){        var num = $(".pk_con>ul").length;        if(num >= 4){            layer.msg('最多只能添加4项');            return false;        }        var id = $(this).attr('id');        var image = $(this).find("img").attr('src');        var name = $(this).find("em").text();        var price = $(this).find("b").text();        $(".pk_jia").removeClass("pk_on");        $(".pk").toggleClass("pk_on");        var html = '';        html +="<li id='"+id+"'>";        html +="<img src='"+image+"'>";        html +="<span><em style='white-space:nowrap;'>";        html +=name+"</em>";        html +="<samp>"+price+"</samp>";        html +="</span>";        html +="<a onclick='removeLi("+id+");'";        html +="' id='remove_li'>删除</a>";        html +="</li>";        $(".pk_con>ul").append(html);    });    $('body').on('click','#remove_li',function(){        $(this).parent("li").remove();    });    //开始对比    $(".pk_trast").click(function(){        var ids = [];        var i = 0;        $("#pk_trast_product>li").each(function(){            ids[i] = $(this).attr('id');            i++;        });        if(ids[1]==null || ids==[]){            layer.msg('请选择要对比的商品');return;        }        $.cookie('goods_contrast_ids',ids);        window.location.href = "<?php echo url('goods/contrast',['bisId'=>$bisId]); ?>";    });    function removeLi(productId){        $("#"+productId).remove();    }</script><?php    require_once "jssdk.php";    $jssdk = new JSSDK("wx6d86475612974d04", "fcc623bbd2abf8b9d3bc351c499003fe");    $signPackage = $jssdk->GetSignPackage();?><script>    wx.config({        debug: false,        appId: '<?php echo $signPackage["appId"];?>',        timestamp: <?php echo $signPackage["timestamp"]; ?>,        nonceStr: '<?php echo $signPackage["nonceStr"];?>',        signature                :                '<?php echo $signPackage["signature"];?>',        jsApiList                :                [                    // 所有要调用的 API 都要加到这个列表中                    'onMenuShareTimeline',                    'onMenuShareAppMessage'                ]    })    ;    wx.ready(function () {        // 在这里调用 API        wx.onMenuShareTimeline({            title: '<?php echo $goods['name']; ?>', // 分享标题            link: 'https://www.ep11.top/index/goods/detail.html?id=<?php echo $goods['id']; ?>&bisId=<?php echo $bisId; ?>', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致            imgUrl: 'https://www.ep11.top<?php echo $goods['image']; ?>', // 分享图标            success: function () {                var info = {                    "url":"https://www.ep11.top/index/goods/detail.html?id=<?php echo $goods['id']; ?>&bisId=<?php echo $bisId; ?>",                    "img_url": "https://www.ep11.top<?php echo $goods['image']; ?>",                    "name":"<?php echo $goods['name']; ?>",                    "type":1,                    "type_from_id":"<?php echo $goods['id']; ?>"                };                info = JSON.stringify(info);                var userId = "<?php echo session('user.id'); ?>";                $.ajax({                    type: "POST",                    url: "<?php echo url('/api/share/addShare'); ?>",                    data: {userId:userId,info:info},                    dataType: "json",                    success: function(data){                        if(data.result == 'success') {                            $('.share').removeClass('is-visible');                            layer.msg(data.msg);                        }else{                            $('.share').removeClass('is-visible');                            layer.msg(data.msg);                        }                    }                });            }        });        wx.onMenuShareAppMessage({            title: '<?php echo $goods['name']; ?>', // 分享标题            desc: '<?php if(empty($goods['description']) || (($goods['description'] instanceof \think\Collection || $goods['description'] instanceof \think\Paginator ) && $goods['description']->isEmpty())): ?>易网互联<?php else: ?><?php echo $goods['description']; endif; ?>', // 分享描述            link: 'https://www.ep11.top/index/goods/detail.html?id=<?php echo $goods['id']; ?>&bisId=<?php echo $bisId; ?>', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致            imgUrl: 'https://www.ep11.top<?php echo $goods['image']; ?>', // 分享图标            success: function () {                var info = {                    "url":"https://www.ep11.top/index/goods/detail.html?id=<?php echo $goods['id']; ?>&bisId=<?php echo $bisId; ?>",                    "img_url": "https://www.ep11.top<?php echo $goods['image']; ?>",                    "name":"<?php echo $goods['name']; ?>",                    "type":1,                    "type_from_id":"<?php echo $goods['id']; ?>"                };                info = JSON.stringify(info);                var userId = "<?php echo session('user.id'); ?>";                $.ajax({                    type: "POST",                    url: "<?php echo url('/api/share/addShare'); ?>",                    traditional: true,                    data: {userId:userId,info:info},                    dataType: "json",                    success: function(data){                        if(data.result == 'success') {                            $('.share').removeClass('is-visible');                            layer.msg(data.msg);                        }else{                            $('.share').removeClass('is-visible');                            layer.msg(data.msg);                        }                    }                });            }        });    });</script></body></html>